<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Cheat sheets - Field Notes</title>
  <link rel="stylesheet" href="../site.css"/>
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="crumbs"><a href="../index.html">← portfolio home</a> · <a href="../notes.html">Field Notes hub</a></div>
    <h1>Cheat sheets*</h1>
    <p class="muted">Fast mental models: permissions, precedence, common traps. (* = under active development)</p>
    <div class="nav small">
      <a href="endpoint.html">Endpoint</a>
      <a href="automation.html">Automation</a>
      <a href="migration.html">Migration</a>
      <a href="cheatsheets.html">Cheat sheets</a>
      <a href="ci.html">CI runbook</a>
    </div>
    <div class="callout"><strong>* Under active development:</strong> I’m actively expanding these notes and publishing additional sanitized artifacts, scripts, and scenario write-ups.</div>
  </div>
</header>

<main class="container">
  <section class="card">
    <h2>Permissions mental model: RBAC vs sharing vs NTFS (where people get burned)</h2>

    <h3>SMB file shares: Share permissions + NTFS are both enforced</h3>
    <ul>
      <li><strong>Effective access over the network</strong> = <strong>Share permissions</strong> ∩ <strong>NTFS permissions</strong> (most restrictive wins).</li>
      <li>Share permissions don’t “override” NTFS; they can only further restrict.</li>
      <li>Deny entries (either layer) are where the hardest-to-debug behavior happens.</li>
    </ul>

    <div class="callout note">
      <strong>Practical best practice:</strong> keep Share permissions broad and manage least-privilege with NTFS. This reduces “two-layer permission math” for operators.
    </div>

    <h3>SharePoint/OneDrive: different model</h3>
    <ul>
      <li><strong>RBAC</strong> = what admins can do in the platform.</li>
      <li><strong>Library/site permissions</strong> = the primary access model (inheritance matters).</li>
      <li><strong>Sharing links</strong> create additional grants (access is often additive, and can create sprawl if unmanaged).</li>
    </ul>

    <div class="callout warn">
      <strong>Common failure pattern:</strong> deep inheritance breaks + ad-hoc exceptions + uncontrolled sharing = eventual “why can they access this?” mystery.
    </div>
  </section>

  <footer>
    <div>Back to <a href="../notes.html">Field Notes hub</a>.</div>
  </footer>
<!-- PERMS_ADDON_V1 -->
<article class="article" id="kb-smb-share-ntfs">
  <h3>SMB file shares: Share vs NTFS (what I learned the hard way)</h3>

  <p><strong>Key rule:</strong> when accessing a file share over the network (<code>\\server\share</code>),
  <strong>Share permissions AND NTFS permissions both apply</strong>. Effective access is the <strong>intersection</strong>
  (the most restrictive combination wins).</p>

  <ul>
    <li><strong>Share permissions do not override NTFS.</strong> They can only further restrict what NTFS allows.</li>
    <li><strong>NTFS does not override Share.</strong> If the share is restrictive, NTFS “extra rights” don’t matter over SMB.</li>
    <li><strong>Deny in either layer wins</strong> (and is the source of many “mystery access” issues).</li>
  </ul>

  <div class="callout note">
    <strong>Important nuance:</strong> Share permissions only apply to <em>network access</em>. If you’re on the server locally,
    Share permissions aren’t part of the equation — it’s NTFS only. That distinction matters when troubleshooting.
  </div>

  <div class="callout note">
    <strong>Operational simplification (common best practice):</strong>
    keep Share permissions broad (to reduce two-layer permission math) and enforce least privilege with NTFS + group-based access.
  </div>

  <div class="callout warn">
    <strong>Debug approach:</strong> don’t guess. Validate with real user context and token membership (nested groups),
    and be careful with deep inheritance breaks and ad-hoc exceptions.
  </div>
</article>
</main>
</body>
</html>